<!DOCTYPE html>
<html>

<body>

	<div id="demo">
		<h2>This is a AJAX Demo</h2>
		<p id="id1"></p>
		<p id="id2"></p>
		
		<button type="button" onclick="loadData()">Get me the data</button>
	</div>

	<script>
		function loadData() {
            fetch(`https://api.allorigins.win/get?url=${encodeURIComponent('https://demo.codeschool.co/js500/ajax/exercise04/')}`)
                .then(response => {
                    if (response.ok) return response.json();
                    throw new Error('Network response was not ok.');
                })
                .then(data => {
                    
                    var json_object = JSON.parse(data.contents);
                    var stu=json_object.students.length;
                    var sum=0;
                    for(i=0;i<stu;i++)
                    {
                        sum=sum+json_object.students[i].age;
                    }
                    sum=sum/stu;
                    
                    document.getElementById("id1").innerHTML=stu;
					document.getElementById("id2").innerHTML=sum;
					
                });
                
        }
	</script>

</body>

</html>